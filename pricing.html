<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
</script>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BioAML - Pricing Plans</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://assets.lemonsqueezy.com/lemon.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .hover-scale {
      transition: transform 0.3s ease-in-out;
    }
    .hover-scale:hover {
      transform: scale(1.05);
    }
    .gradient-bg {
      background: linear-gradient(135deg, #3b82f6, #10b981);
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <header class="relative h-64 gradient-bg text-white flex flex-col justify-center items-center text-center">
    <div class="relative z-10">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 animate-fade-in">BioAML Pricing Plans</h1>
      <p class="text-lg md:text-xl mb-4">Choose the plan that fits your needs</p>
      <a href="index.html" class="bg-white text-blue-600 px-6 py-3 rounded-full font-semibold hover:bg-blue-100 transition duration-300">Back to Services</a>
    </div>
  </header>

  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
    
        <div class="max-w-4xl mx-auto mb-10 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-5">Choose Your Module Subscription</h2>
            <select id="moduleSelect" class="bg-white border border-blue-500 text-gray-900 text-xl rounded-xl focus:ring-blue-500 focus:border-blue-500 p-4 w-full md:w-1/2 shadow-xl appearance-none cursor-pointer">
                <option value="" disabled selected>--- Select Module ---</option> 
                <option value="Genomic">Genomic Pathogenicity</option>
                <option value="Angiography">Angiography</option>
                <option value="Radiology">Radiology</option>
            </select>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
        
        <div class="bg-white p-6 rounded-lg shadow-lg hover-scale text-gray-800">
          <h3 class="text-2xl font-bold text-center mb-4">Free</h3>
          <p class="text-center text-gray-600 mb-4">$0 / month</p>
          <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
            <li>5 Genomic predictions/month</li>
            <li>3 Angiography predictions/month</li>
            <li>Basic support</li>
            <li>Community access</li>
          </ul>
          <button class="plan-btn bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition duration-300 w-full" data-plan="Free">Get Started</button>
        </div>

        <div id="basicPlanCard" class="bg-white p-6 rounded-lg shadow-lg hover-scale text-gray-800 border-2 border-green-500 flex flex-col justify-between">
            <h3 class="text-2xl font-bold text-center mb-4">Basic</h3>
            <div id="basicPlanContent">
                <p class="text-center text-gray-500">Select a module above to view pricing.</p>
            </div>
            <button id="basicPlanBtn" class="plan-btn bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition duration-300 w-full mt-6" data-plan="Basic" data-url="" disabled>Choose Basic</button>
        </div>

        <div id="premiumPlanCard" class="bg-white p-6 rounded-lg shadow-lg hover-scale text-gray-800 flex flex-col justify-between">
            <h3 class="text-2xl font-bold text-center mb-4">Premium</h3>
            <div id="premiumPlanContent">
                <p class="text-center text-gray-500">Select a module above to view pricing.</p>
            </div>
            <button id="premiumPlanBtn" class="plan-btn bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 w-full mt-6" data-plan="Premium" data-url="" disabled>Choose Premium</button>
        </div>
      </div>
      
      <div class="mt-12 max-w-4xl mx-auto bg-gray-50 p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Your Selection</h3>
        <div id="selectedServices" class="mb-4 space-y-2">
            <p class="text-gray-500">No paid plan selected yet.</p>
        </div>
        <div class="border-t pt-4">
            <div class="flex justify-between items-center mb-4">
                <span class="text-lg font-semibold">Total:</span>
                <span id="totalPrice" class="text-xl font-bold text-green-600">$0.00</span>
            </div>
            <button id="checkoutBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                Proceed to Checkout
            </button>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-gray-800 text-white py-6">
    <div class="container mx-auto text-center">
      <p>&copy; 2025 BioAML. All rights reserved.</p>
      <a href="index.html" class="text-green-400 hover:underline">Back to Services</a>
    </div>
  </footer>

  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 1s ease-out;
    }
  </style>

<script>
// pricing (13).html (Around line 178, after variable declarations)

    let selectedPlan = null;
    let selectedCheckoutUrl = null;
    let selectedModule = ''; 


    // Define all pricing, features, and checkout URLs based on the selected module
    const MODULE_PLANS = {
        'pathogenicity': {
            basic: {
                price: 9.99,
                features: [
                    'Unlimited Genomic predictions',
                    'Email support',
                    'Priority processing'
                ],
                url: 'https://bioaml.lemonsqueezy.com/buy/1196ea4c-ab03-4e26-855b-9492a300043f' 
            },
            premium: {
                price: 29.99,
                features: [
                    'Unlimited all predictions',
                    'Advanced analytics',
                    '24/7 priority support',
                    'API access'
                ],
                url: 'https://[YOUR_STORE].lemonsqueezy.com/checkout/buy/[GENOMIC_PREMIUM_VARIANT_ID]'
            }
        },
        'Angiography': {
            basic: {
                price: 9.99,
                features: [
                    '50 Angiography predictions/month',
                    'Email support',
                    'Priority processing'
                ],
                url: 'https://bioaml.lemonsqueezy.com/buy/1196ea4c-ab03-4e26-855b-9492a300043f' 
            },
            premium: {
                price: 29.99,
                features: [
                    'Unlimited all predictions',
                    'Advanced analytics',
                    '24/7 priority support',
                    'API access'
                ],
                url: 'https://[YOUR_STORE].lemonsqueezy.com/checkout/buy/[ANGIO_PREMIUM_VARIANT_ID]' 
            }
        },
        'Radiology': {
            basic: {
                price: 9.99,
                features: [
                    '50 Radiology predictions/month',
                    'Email support',
                    'Priority processing'
                ],
                url: 'https://bioaml.lemonsqueezy.com/buy/1196ea4c-ab03-4e26-855b-9492a300043f' 
            },
            premium: {
                price: 29.99,
                features: [
                    'Unlimited all predictions',
                    'Advanced analytics',
                    '24/7 priority support',
                    'API access'
                ],
                url: 'https://[YOUR_STORE].lemonsqueezy.com/checkout/buy/[RADIO_PREMIUM_VARIANT_ID]' 
            }
        }
    };
    
    function generateFeatureList(features) {
        return `<ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
            ${features.map(feature => `<li>${feature}</li>`).join('')}
        </ul>`;
    }

    // Function to render the plan cards based on the selected module
    function renderPlans(module) {
        const basicContent = document.getElementById('basicPlanContent');
        const premiumContent = document.getElementById('premiumPlanContent');
        const basicBtn = document.getElementById('basicPlanBtn');
        const premiumBtn = document.getElementById('premiumPlanBtn');
        const freeBtn = document.querySelector('[data-plan="Free"]');

        if (!module || !MODULE_PLANS[module]) {
            // Logic for when "--- Select Module ---" is chosen
            const placeholderHtml = '<p class="text-center text-gray-500">Select a module above to view pricing.</p>';
            
            basicContent.innerHTML = placeholderHtml;
            premiumContent.innerHTML = placeholderHtml;
            basicBtn.disabled = true;
            premiumBtn.disabled = true;
            freeBtn.disabled = true;
            
            // Re-label buttons for clarity
            basicBtn.textContent = 'Choose Basic';
            premiumBtn.textContent = 'Choose Premium';
            freeBtn.textContent = 'Get Started';
            
            selectedPlan = null;
            updateSelection();
            return;
        }

        const moduleData = MODULE_PLANS[module];
        basicBtn.disabled = false;
        premiumBtn.disabled = false;
        freeBtn.disabled = false;

        // --- Render Basic Plan ---
        const basicData = moduleData.basic;
        const basicContentHtml = `
            <p class="text-center text-gray-600 mb-4">$${basicData.price.toFixed(2)} / month</p>
            ${generateFeatureList(basicData.features)}
        `;
        basicContent.innerHTML = basicContentHtml;
        basicBtn.setAttribute('data-url', basicData.url);
        
        // --- Render Premium Plan ---
        const premiumData = moduleData.premium;
        const premiumContentHtml = `
            <p class="text-center text-gray-600 mb-4">$${premiumData.price.toFixed(2)} / month</p>
            ${generateFeatureList(premiumData.features)}
        `;
        premiumContent.innerHTML = premiumContentHtml;
        premiumBtn.setAttribute('data-url', premiumData.url);

        // Reset Selection state and re-render the Your Selection box
        selectedPlan = null;
        updateSelection();
    }

    // Refactored updateSelection function to use module data
    function updateSelection() {
        const checkoutBtn = document.getElementById('checkoutBtn');
        const selectedList = document.getElementById('selectedServices');
        let total = 0;
        
        // Remove previous highlight from all cards
        document.querySelectorAll('.plan-btn').forEach(btn => {
            // CHANGED: Changed ring-blue-500 to ring-green-500
            btn.closest('.bg-white').classList.remove('ring-4', 'ring-green-500', 'ring-opacity-50');
        });

        if (!selectedModule) {
            // This handles the state when no module is selected
            selectedList.innerHTML = '<p class="text-gray-500">Select a module above.</p>';
            document.getElementById('totalPrice').textContent = `$0.00`;
            checkoutBtn.disabled = true;
            return;
        }
        
        if (selectedPlan === 'Free') {
            selectedList.innerHTML = `<div class="flex justify-between items-center p-2 bg-white rounded">
                <span>Free Trial for ${selectedModule}</span>
                <span class="text-green-600 font-semibold">$0.00</span>
            </div>`;
            selectedCheckoutUrl = null;
            document.getElementById('totalPrice').textContent = `$0.00`;
            checkoutBtn.disabled = true;
            // CHANGED: Changed ring-blue-500 to ring-green-500
            document.querySelector(`[data-plan="Free"]`).closest('.bg-white').classList.add('ring-4', 'ring-green-500', 'ring-opacity-50');
        } else if (selectedPlan && MODULE_PLANS[selectedModule]) {
             const planData = MODULE_PLANS[selectedModule][selectedPlan.toLowerCase()];
             total = planData.price;
             selectedList.innerHTML = `<div class="flex justify-between items-center p-2 bg-white rounded">
                <span>${selectedModule} - ${selectedPlan} Plan</span>
                <span class="text-green-600 font-semibold">$${planData.price.toFixed(2)}</span>
            </div>`;
             selectedCheckoutUrl = planData.url;
             document.getElementById('totalPrice').textContent = `$${total.toFixed(2)}`;
             document.getElementById('checkoutBtn').disabled = false;
             // CHANGED: Changed ring-blue-500 to ring-green-500
             document.querySelector(`[data-plan="${selectedPlan}"]`).closest('.bg-white').classList.add('ring-4', 'ring-green-500', 'ring-opacity-50');
        } else {
            selectedList.innerHTML = '<p class="text-gray-500">No paid plan selected yet.</p>';
            selectedCheckoutUrl = null;
            document.getElementById('totalPrice').textContent = `$0.00`;
            document.getElementById('checkoutBtn').disabled = true;
        }
    }

    // Event listeners for plan buttons (now they set the plan and trigger updateSelection)
    document.querySelectorAll('.plan-btn').forEach(button => {
        button.addEventListener('click', () => {
            selectedPlan = button.getAttribute('data-plan');
            updateSelection();
        });
    });

    // Event listener for the dropdown menu (triggers re-render)
    document.getElementById('moduleSelect').addEventListener('change', (event) => {
        selectedModule = event.target.value;
        renderPlans(selectedModule);
    });

    // Checkout button logic to manually trigger the Lemon Squeezy overlay
    document.getElementById('checkoutBtn').addEventListener('click', () => {
        if (selectedPlan === 'Free' || !selectedPlan || !selectedModule) {
            alert('Please select a Basic or Premium plan for a module before checking out.');
            return;
        }
        
        if (selectedCheckoutUrl) {
            if (typeof LemonSqueezy !== 'undefined' && LemonSqueezy.Url) {
                LemonSqueezy.Url.Open(selectedCheckoutUrl);
            } else {
                alert('Lemon Squeezy script not yet loaded. Redirecting...');
                window.location.href = selectedCheckoutUrl;
            }
        } else {
             alert('Checkout URL is missing for the selected plan. Please check the configuration.');
        }
    });
    // 5. URL CHECK & INITIALIZATION LOGIC (Now placed AFTER MODULE_PLANS and function definitions)

    function getModuleFromUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get('module');
    }

    const initialModule = getModuleFromUrl();
    
    // Check if a valid module was passed in the URL
    if (initialModule && MODULE_PLANS[initialModule]) {
        // 5a. Set the global variable
        selectedModule = initialModule; 
        
        // 5b. Update the dropdown selection visually
        const moduleSelect = document.getElementById('moduleSelect');
        const option = Array.from(moduleSelect.options).find(opt => opt.value === initialModule);
        if (option) {
            moduleSelect.value = initialModule;
        }
    }
    // Initial call to set placeholder content
    renderPlans(selectedModule);
</script>
</body>
</html>
